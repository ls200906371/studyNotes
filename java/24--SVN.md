## SVN ##
	* Subversion 版本控制器
		* 版本控制
			* 是一种记录若干文件内容变化，以便将来查阅特定版本修订情况的系统
		
	* 工作原理
		* 采取C/S(客户端/服务端)模式，在服务器的版本库中保存项目文件的各个版本，所有参与协同开发的程序员在自己本地电脑上保存一个工作副本。
		* SVN支持程序员将本地副本更新到服务器端的最新版本，也支持将本地副本的最新改变更新到服务器端，而且后面的更新不会覆盖前面的更新，而是作为一个新的版本被保存下来——SVN甚至支持将本地工作副本恢复为服务器端保存的某一个历史版本。

	* 基本操作
		* 检出： 将一个服务器端创建好的项目整个下载到本地
		* 更新： 将本地文件更新为服务器端的最新版本
		* 提交： 将本地修改提交到服务器

	* 安装
		* 测试是否安装成功	svn --version
		
	* 配置版本库
		* svnadmin create D:\SVNRepository	创建
		* 开启服务
			* 命令行
				* svnserve -dr D:\SVNRepository		
				* 默认监听3690端口

			* 注册windows服务（注意：必须以管理员身份运行命令行）
				* sc create 服务名称 binpath= "SVN安装目录\bin\svnserve.exe --service -r 仓库目录" start= auto depend= Tcpip
				* 注意：binpath=，start=和depend= 后面都必须有一个空格。其中depend参数表示依赖其他的服务，可以不写。 
				* 例：sc create SVNService binpath= "D:\Tools\Subversion\bin\svnserve.exe --service -r E:\SVNRepository" start= auto

			* 如果服务已经存在，可以使用sc命令删除
				* 先停止服务	sc stop SVNService
				* 在删除服务	sc delete SVNService

	* myeclipse插件安装配置
		* 第一种方式：
			* 解压eclipse_svn_site-1.6.5.zip文件，把得到features和plugins拷贝到MyEclipse安装目录的dropins目录中
		* 第二种方式：
			* 解压eclipse_svn_site-1.6.5.zip文件，把features和plugins放到磁盘的任意没有空格和中文的目录中
			* 在myeclipse的安装目录的dropins目录中创建一个任意非中文，扩展名是.link的文件
			* 在文件中做如下配置
				path=文件位置目录
				path=E:/SVNClientPlugin

			* 最后启动MyEclipse，在菜单栏点击window——preferences——team，看到有SVN选项即搭建成功

		* 建立本地和服务器资源库的关系		
			* 在MyEclipse上点击window——showview，选择SVN资源库，建立本地和服务器之间的关系。
			* 在新弹出的选项卡中右键点击新建，在URL后输出：svn://localhost:3690，点击finish
			* 注意：以后在企业中有可能使用SVN和Tomcat整合，有可能使用的不是svn:(使用的协议），而是http协议。
	   		* 端口号3690是默认的，可以不写。


//-------共享项目（首次上传项目到服务器）------------------------------------------
	* 在要上传的项目上点击右键——选择team，点击share project。
	* 在新弹出的对话框中选择svn，点击下一步，选择【已有资源库位置】,点击下一步。
	* 选择是否使用新的项目名称，如果不使用可以直接点击下一步。
	* 直接点击完成会报错。原因是因为：没有权限。

//-------开启服务端的匿名访问权限--------------------------------------------
	* 找到服务器仓库的目录下的conf目录，在里面找到一个svnserve.conf文件
	* 在文件中找到一个anon-access = read的配置，把前面的注释去掉。注意前面有一个空格，必须去掉。改为anon-access = write
	* 重复【共享项目】的操作，就OK了。

//--------checkout检出项目------------------------------------------------------
	* 打开myeclipse，在package explorer中点击右键使用New（或者Import)找到SVN，选择从SVN上检出。
	* 在新弹出的对话框中选择【创建新的项目】，点击next。
	* 在url中输入svn服务器的地址。（由于我们目前是匿名访问，没有权限控制，任何人都可以看到）
	* 使用默认选项，直接点击finish。

//-------提交修改的内容------------------------------------------------------------------
	* 我们与svn服务器同步的情况下，代码文件右下角都有一个金色圆柱体。当有修改(和SVN服务器不一致）之后，就变成*号了。
	* 右键点击要提交的文件，选择team，选择提交。

//-------更新服务器内容-------------------------------------------------------------------
	* 在要更新的文件上点击右键，选择team，点击更新。注：如果其他团队成员有过提交，版本号会发生变化。

//-------冲突及解决----------------------------------------------------------------------
	* 第一种冲突：两个人改了不相同的代码
		* 当我们提交的代码的当前版本号和服务器不一致时，会导致冲突（就是第二类丢失更新）
		* 解决办法：先更新再提交。更新是把SVN服务器的最新代码同步到本地，与本地代码合并。之后再提交就OK了。

	* 第二种冲突：两个人改了相同的代码
		* 当团队中和某人改了相同的代码后，会出现如下情况：（实际开发中很难遇到，因为在企业中SVN的权限会分配的很细致）
			public String updateAccount(){
			<<<<<<< .mine
				accountService.transfer("aaa", "bbb", 500);
			=======
				accountService.transfer("aaa", "bbb", 1000);
			>>>>>>> .r4
				return SUCCESS;
			}
			并且产生临时文件。
		* 其中：.mine指的是自己的。 .r4指的是服务器版本。这个时候，到底以哪个为准以实际开发具体情况为准。
		* 解决冲突：删除多于的临时文件。决定是留自己的还是他人的。保留一个，先更新，再提交，即可。


//-------恢复到某个指定版本----------------------------------------------------
		* 在要恢复的文件上点击右键，选择team，找到【显示资源的历史版本记录】
		* 接下来就可以根据实际情况去比较代码，在要使用的代码上点击右键——点击比较。以查看不同版本的差别。
		* 选择要恢复的版本，右键点击【获取修订版】。

//--------配置服务器权限---------------------------------------------------------------------
		* 关闭匿名访问。打开权限提交：第13行：auth-access = write的注释去掉。
		* 创建用户：
			* 先在svnserve.conf中找到第20行：password-db = passwd，把前面的注释去掉。
			* 在SVN仓库目录的conf目录中找到passwd文件，右键编辑。在里面按照例子添加用户。
		* 配置权限：
			* 先在svnserve.conf中找到第27行：authz-db = authz，把前面的注释去掉。
			* 在SVN仓库目录的conf目录中找到authz文件，右键编辑。
			* [groups]下配置的内容用于指定小组中的成员。使用：小组名称=用户名,配置可访问的组员。例如：canWrite=zhy。
			* [/foo/bar]是指定可以操作哪些目录。当使用[/]即表示可操作当前目录及其子目录。
			* @小组名称 = 访问类型 表明是哪个小组下的成员可以访问
			* 用户名 = 访问类型 表明哪个用户可以访问
			* [/]			表明当前项目的根目录
			* @canWrite = rw		表明的是：canWrite小组的组员对当前SVN仓库所有项目的所用目录有读写权限
			* guest = r		表明的是：guest用户对当前SVN仓库所有项目所有目录具有只读权限
			* * =			表明出来@canWrite小组组员及guest之外的其他人对SVN仓库所有项目的所用目录不具有任何权限。
			* 注意：如果写了 [/]  guest = r  [/oa]  guest = rw 表明：guest用户对当前SVN仓库中的除了oa项目外的其他项目具有只读权限，但是oa项目具有读写权限。
		


//----------针对获取历史记录中出现错误的解决-----------------------------------------------------------------------------------
	* 当我们获取历史记录是出现“正在访存SVN修订版历史记录”has xxxxxxxx。。。。。时，使用如下办法解决
	* 找到SVN仓库目录的conf目录，打开svnserve.conf文件，把匿名访问的注释去掉，但是把值改为none即可。# anon-access = none

//---------清除本地项目文件---------------------------------------------------------------------------
	* 必须注意：
		* 当我们想删除本地的项目文件时，首先要确保的是和SVN服务器断开了连接。否则的话，我们把本地的删除之后，一提交，服务器的代码也就都没有了。
		* 断开和服务器的联系：
			* 在项目上点击右键，选择team，找到【断开联系】点击。在弹出的对话框中，选择【删除本地svn目录】，点击完成。即与SVN服务器断开练习。



